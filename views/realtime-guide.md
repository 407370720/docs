# 实时通信开发指南

## 简介

在阅读本开发指南之前，请先阅读下[《实时通信开发指南》](./realtime_v2.html)，了解实时通信的基本概念和模型。

### 使用场景
LeanCloud 实时通信服务的目标是在开发者没有任何服务端开发经验以及不需要自己拥有服务器的情况下实现如下应用场景：

- 类陌陌，类微信的社交聊天应用或者匿名聊天应用
- 在线聊天的客服系统
- 游戏内的帮派，公会，世界频道的聊天

## 安装与初始化

### 导入 SDK

### 初始化实时通信服务


## 场景分类

LeanCloud 实时通信服务有如下几个特点：

- 不侵入开发者的用户系统
- 自主研发的可拓展的聊天协议
- 开发者自主的权限控制流程
- 云端 Hook 配合客户端实现管理需求

因此本文根据具体的使用场景详细介绍针对该场景所应该使用的接口和最佳实践的代码逻辑。

### 社交场景
社交软件和应用一直是移动研发领域的热点和难点，大热如微信和陌陌，难点也在于聊天的流程多样性，因此我们针对社交场景下的一些常见需求进行演示。

#### 私聊


开始之前，一定要强调的是私聊中如何实现两个人成为好友，以及成为好友之后才可以开始聊天这一鉴权过程**并不是** LeanCloud 实时通信提供的服务内容，它属于开发者自主掌控的鉴权逻辑，这一章节可以在[安全与鉴权](#安全与鉴权)中阅读解决方案。

首先我们假设系统中存在两个用户，Tom 和 Jerry，以下我们演示 Tom 和 Jerry 分别登录到聊天服务器：

```cs
```

##### 建立私聊对话
在 LeanCloud 实时通信中把所有聊天的载体定义为一个「对话」，这个可以参照微信的私聊加入另外一个人之后就会变成一个新的 3 人的对话去理解，私聊和群聊的最大区别就是人数等于 2 的就是私聊，大于 2 的就是群聊。


```cs

```

##### 私聊发送消息
对话创建之后，在对话里面的成员就可以发送消息，这里请一定明确一个概念

> 消息的接收方是对话，而不是某一个具体的终端，对话里面的成员都会接收到该消息

因此在私聊的场景下，很容易给开发者造成一个**假象**「消息是发给某一个用户的」。


```cs
```

##### 私聊接收消息

接收消息依赖于客户端的事件监听，首先我们要明确不同场景对应的接收流程：


###### 接收方在线